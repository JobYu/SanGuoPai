# 規則細則

與 [GDD](../GDD.md) 核心玩法對齊，本文件補充牌局與數值的具體規格，供原型實作使用。

---

## 牌組

- **標準 52 張**：四種花色、每種 A～K 各一張。參考小丑牌 (Balatro) 的牌組設計。
- **一局一洗**：每局開始前洗牌，從牌堆發牌。
- **後續擴展**：通關後增加的模式可能引入多副牌（多幅牌）；原型階段僅使用單副 52 張。

---

## 點數與 A 的計算

- **數字牌**：2～10 為面值。
- **J / Q / K**：均為 10 點。
- **A**：可算 **1** 或 **11**，取對己方最有利且不爆牌的計算方式。
  - 例：A + 9 = 20（A 算 11）；A + 9 + 5 則 A 算 1，合計 15，避免爆牌。

---

## 氣勢與敗北 (High Stakes)

- **玩家氣勢**：
  - **初始值**：100。
  - **高壓博弈**：若玩家在任一回合敗北（點數 < 敵將點數，或玩家爆牌），則玩家氣勢**直接歸零**，遊戲失敗。
  - **目標積分 (Score Target)**：敵將的氣勢（如 60, 120 等）代表玩家需要累積達成的傷害總額。玩家獲勝時的傷害會從敵將氣勢中扣除。當敵將氣勢 ≤ 0 時，玩家獲得該場戰鬥的勝利。

---

## 勝負與傷害結算

（與 GDD §2.1、§2.2 一致，摘錄以利對照。）

- **玩家勝**：己方點數 > 敵將點數且未爆牌 → 敵將扣除「總傷害」。
- **平局 (Push)**：點數相同 → 不造成傷害、玩家也不受傷。
- **玩家敗**：己方點數 < 敵將點數，或玩家爆牌 → 玩家角色重置，冒險結束。

**傷害公式**：`總傷害 = (基礎傷害 + 加法加成) × 乘法倍率`

- **基礎傷害 (精準博弈規則)**：
  - 公式：`(玩家點數 × 獎勵倍率) + 玩家手牌點數`
  - **獎勵倍率**：`10 + (21 - 玩家點數)`
  - 此規則極大鼓勵玩家以較小點數風險獲勝。例如 11 點獲勝時，基礎倍率高達 20 倍。
  - 完美 21 點獎勵仍遵循此規則，倍率為 10x，即 `(21 * 10) + 21 = 231` 基礎值。
- 武將技能之加法加成、乘法倍率見 [武將數值表](武將數值表.md) 與 [data/generals.json](../data/generals.json)。

---

## 單局流程（原型）

1. 遊戲開始畫面 → 進入戰鬥（遊戲畫面）
2. 發牌（雙方各兩張，敵將一明一暗）
3. 玩家要牌 / 過牌（停牌）
4. 敵方回合（AI 決策要牌或停牌）
5. 結算（傷害 / 氣勢變動）
6. 勝負判定 → 下一局或結束（同一敵將氣勢扣完則關卡結束）
